openapi: 3.0.0

info:
  version: 0.5.2
  title: Inertia Daemon API
  description: The Inertia daemon's REST API
  contact:
    name: UBC Launch Pad
    email: team@ubclaunchpad.com
    url: https://github.com/ubclaunchpad/inertia
  license:
    name: MIT
    url: https://github.com/ubclaunchpad/inertia/blob/master/LICENSE

servers:
  - url: https://$DAEMON_ADDR:$DAEMON_PORT

paths:
  /:
    get:
      summary: Daemon healthcheck
      description: Returns OK
      responses:
        200:
          description: daemon is online
  /webhook:
    post:
      summary: Webhook endpoint
      description: Accepts incoming payloads from Git hosts
      responses:
        200:
          description: hello world
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OKResponse'
        default:
          $ref: '#/components/responses/Error'
  /status:
    get:
      summary: Deployment status check
      description: Check deployment status
      responses:
        200:
          description: hello world
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OKResponse'
        default:
          $ref: '#/components/responses/Error'
  /up:
    post:
      summary: asdf
      description: asdf
      responses:
        200:
          description: 'Deployed'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OKResponse'
        default:
          $ref: '#/components/responses/Error'
  /down:
    post:
      summary: asdf
      description: asdf
      responses:
        default:
          $ref: '#/components/responses/Error'
  /reset:
    post:
      summary: asdf
      description: asdf
      responses:
        default:
          $ref: '#/components/responses/Error'
  /env:
    post:
      summary: asdf
      description: asdf
      responses:
        default:
          $ref: '#/components/responses/Error'
    get:
      summary: asdf
      description: asdf
      responses:
        200:
          description: 'penis'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OKResponse'
        default:
          $ref: '#/components/responses/Error'

  # auth

  /user/validate:
    get:
      summary: asdf
      description: asdf
      responses:
        default:
          $ref: '#/components/responses/Error'
  /user/login:
    post:
      summary: asdf
      description: asdf
      responses:
        default:
          $ref: '#/components/responses/Error'
  /user/list:
    get:
      summary: asdf
      description: asdf
      responses:
        default:
          $ref: '#/components/responses/Error'
  /user/add:
    post:
      summary: asdf
      description: asdf
      responses:
        default:
          $ref: '#/components/responses/Error'
  /user/remove:
    post:
      summary: asdf
      description: asdf
      responses:
        default:
          $ref: '#/components/responses/Error'
  /user/reset:
    post:
      summary: asdf
      description: asdf
      responses:
        default:
          $ref: '#/components/responses/Error'
  /user/totp/enable:
    post:
      summary: asdf
      description: asdf
      responses:
        default:
          $ref: '#/components/responses/Error'
  /user/totp/disable:
    post:
      summary: asdf
      description: asdf
      responses:
        default:
          $ref: '#/components/responses/Error'

components:
  responses:
    Error:
      description: Something went wrong - refer to the error code and message for more details
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrResponse'
  schemas:
    OKResponse:
      required:
        - code
        - message
      properties:
        code:
          type: integer
        message:
          type: string
        request_id:
          type: string
        data:
          type: object
          description: response data and additional context
    ErrResponse:
      required:
        - code
        - message
        - error
      properties:
        code:
          type: integer
        message:
          type: string
        error:
          type: string
        request_id:
          type: string
        data:
          type: object
          description: additional context
